<div class="full">
  <navi-bar></navi-bar>
  <h1 class="articleTitle">Offer Bundles</h1>
<table height="25px" class="test">
  <tr height="25px">
    <td >
        <button (click)="ApplyRules()" class="button">Apply Rules</button>
<strong>
  {{rulesResults}}
</strong>

      <span class="articleSubTitle">SKU:</span>
      <input [(ngModel)]="searchText" placeholder="Enter search text here">
    </td>
    <td width="200px">
        <select [(ngModel)]="selectedStatus">
          <option value="All">All</option>
          <option value="Working">Working</option>
          <option value="Full">Full</option>            
          <option value="Accepted">Accepted</option>
          <option value="Expired">Expired</option>
          <option value="Rejected">Rejected</option>
          <option value="Canceled">Canceled</option>
          <option value="Completed">Completed</option>
        </select>
      </td>
      <td width="200px">
        <select [(ngModel)]="pageSizeValue">
          <option value="5">5 per page</option>
          <option value="10">10 per page</option>
          <option value="25">25 per page</option>
          <option value="50">50 per page</option>
          <option value="100">100 per page</option>
        </select>
      </td>
  </tr>
</table>
  <table stye="cellpadding:0px; cellspacing:0px;" border="1px" >
    <tr style="background-color: lightblue">
        <th width="30%">Product Name</th>
        <th width="5%">Status</th>
        <th>Consumer Offers</th>
    </tr>
    <tr *ngFor="let value of allConsumerOfferBundles | filter :  {  productSKU: searchText}
          | paginate: {itemsPerPage: pageSizeValue, currentPage:page, id: '1'}; let i = index"
          valign="top">
      <td valign="top">
        {{value.consumerOfferList[0].compkeyId.mpproductKeyId.name}}
      </td>
      <td valign="top" [style.color]="value.offerBundle.bundleStatusKey.status === 'Accepted' ? '#19CE2E' : 'blue'">        
        {{value.offerBundle.bundleStatusKey.status}} </td>
      <td valign="top">
          <table stye="cellpadding:0px; cellspacing:0px;" border="1px;" border-color="blue"  >
              <tr style="background-color: lightgrey">
                  <th item-width="25%">Consumer Name</th>
                  <th item-width="8%">Quantity</th>
                  <th item-width="12%">Product Price</th>
                  <th item-width="10%">Offer Price</th>
                  <th item-width="15%">Offer Date</th>
                  <th item-width="15%">End Date</th>
                  <th item-width="15%">Status</th>    
              </tr>
          <tr *ngFor="let co of value.consumerOfferList">
                  <td>{{co.coconsumerKeyId.handle}}</td>
                  <td align='right'>{{co.quantity}} </td>
                  <td align='right'>${{co.compkeyId.price| number:'1.2-5'}}</td>
                  <td align='right' [style.color]="co.compkeyId.price <= co.maxPrice ? 'red' : 'black'">
                    ${{co.maxPrice | number:'1.2-5' }}</td>
                  <td>{{co.offerredDate | date:'MM/dd/yyyy'}} </td>
                  <td [style.color]="co.endDate <= today ? 'red' : 'black'">
                    {{co.endDate | date:'MM/dd/yyyy'}} </td>
                  <td [style.color]="co.coofferStatusKeyId.status === 'Approved' ? '#19CE2E' : 'blue'">
                    {{co.coofferStatusKeyId.status}} </td>
            </tr>
        </table>
      </td>
    </tr>
  </table>
  <pagination-controls (pageChange)="page = $event" id="1"
  maxSize="10" pages = "{10,20}" directionLinks="true" autoHide="true">
</pagination-controls>
</div>
